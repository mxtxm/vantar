* Mongo search case in sensitive
* admin pages left miss right align
* dto validation rules (multi field)
* vantar List Set Collection check
* vantar enum values check
* FetchCatch does not support Viwable
* MongoMapping.java:302
* date based on lang




JAVA_OPTS="-Xms2048m -Xmx4096m -XX:-OmitStackTraceInFastThrow -XX:MaxJavaStackTraceDepth=-1"


JAVA_OPTS=



JAVA_OPTS="-Djava.security.egd=file:/dev/./urandom -Djava.awt.headless=true -Xmx512m -XX:+UseConcMarkSweepGC"
-Xmssize Specifies the initial heap size.
-Xmxsize Specifies the maximum heap size.
-XX:MaxPermSize=size Sets the maximum permanent generation space size. This option was deprecated in JDK 8, and superseded by the -XX:MaxMetaspaceSize option.
Sizes are expressed in bytes. Append the letter k or K to indicate kilobytes, m or M to indicate megabytes, g or G to indicate gigabytes.
export CATALINA_OPTS="-Xms4096M -Xmx4096M"












Oct 02 13:23:03 irib systemd[1]: tomcat9.service: Failed with result 'exit-code'.
...skipping...
● tomcat9.service - Apache Tomcat 9 Web Application Server
     Loaded: loaded (/lib/systemd/system/tomcat9.service; enabled; vendor preset: enabled)
     Active: failed (Result: exit-code) since Sat 2021-10-02 13:23:03 +0330; 8s ago
       Docs: https://tomcat.apache.org/tomcat-9.0-doc/index.html
    Process: 2707991 ExecStartPre=/usr/libexec/tomcat9/tomcat-update-policy.sh (code=exited, status=0/SUCCESS)
    Process: 2708007 ExecStart=/bin/sh /usr/libexec/tomcat9/tomcat-start.sh (code=exited, status=1/FAILURE)
   Main PID: 2708007 (code=exited, status=1/FAILURE)

Oct 02 13:23:03 irib systemd[1]: Starting Apache Tomcat 9 Web Application Server...
Oct 02 13:23:03 irib systemd[1]: Started Apache Tomcat 9 Web Application Server.
Oct 02 13:23:03 irib tomcat9[2708007]: NOTE: Picked up JDK_JAVA_OPTIONS:  --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.rmi/su>
Oct 02 13:23:03 irib tomcat9[2708007]: intx MaxJavaStackTraceDepth=-1 is outside the allowed range [ 0 ... 1073741823 ]
Oct 02 13:23:03 irib tomcat9[2708007]: Improperly specified VM option 'MaxJavaStackTraceDepth=-1'
Oct 02 13:23:03 irib tomcat9[2708007]: Error: Could not create the Java Virtual Machine.
Oct 02 13:23:03 irib tomcat9[2708007]: Error: A fatal exception has occurred. Program will exit.
Oct 02 13:23:03 irib systemd[1]: tomcat9.service: Main process exited, code=exited, status=1/FAILURE
Oct 02 13:23:03 irib systemd[1]: tomcat9.service: Failed with result 'exit-code'.
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~

user@irib:/var/lib/tomcat9$ sudo vim /usr/share/tomcat9/bin/setenv.sh
user@irib:/var/lib/tomcat9$ sudo service tomcat9 restart
user@irib:/var/lib/tomcat9$ sudo tail -n 10000 -f /opt/news-mining/log/n.log
INFO  13:24:10 Application.java:34 > Initializing application



INFO  13:24:10 Application.java:37 loaded dto info
INFO  13:24:11 Application.java:40 disabled SSL connection checking
INFO  13:24:11 Application.java:43 started localization
INFO  13:24:11 QueueConnection.java:41 success > connection to rabbit
INFO  13:24:11 QueueConnection.java:56 created queue channel(message)
INFO  13:24:11 QueueConnection.java:56 created queue channel(news-scraper)
INFO  13:24:11 QueueConnection.java:56 created queue channel(news-scraper-complete)
INFO  13:24:11 QueueConnection.java:56 created queue channel(re-scrape)
INFO  13:24:12 QueueConnection.java:56 created queue channel(process)
INFO  13:24:12 QueueConnection.java:56 created queue channel(process)
INFO  13:24:12 QueueConnection.java:56 created queue channel(process)
INFO  13:24:12 QueueConnection.java:56 created queue channel(indexing)
INFO  13:24:12 QueueConnection.java:56 created queue channel(data-shaper)
INFO  13:24:12 QueueConnection.java:56 created queue channel(api-scrape)
INFO  13:24:12 QueueConnection.java:56 created queue channel(api-process)
INFO  13:24:13 MongoConnection.java:62 success connection to mongo
INFO  13:24:13 Application.java:149 loaded agencies(526)
INFO  13:24:13 Application.java:150 loading provinces(31)
INFO  13:24:13 Application.java:151 loading subjectprofiles(101)
INFO  13:24:13 Application.java:152 loaded user-agents(11)
INFO  13:24:14 Services.java:203 ServiceScrapeScheduler started
INFO  13:24:14 Services.java:203 ServiceScraper started
INFO  13:24:14 Services.java:203 ServiceNewsImport started
INFO  13:24:14 Services.java:203 ServiceBackup started
INFO  13:24:14 Services.java:203 ServiceDtoCache started
INFO  13:24:14 Services.java:203 ServiceProcess started
INFO  13:24:14 Services.java:203 ServiceIndexing started
INFO  13:24:14 Services.java:203 ServiceSocialNewsImport started
ERROR 13:24:14 ServiceNewsExport.java:170 ! ! !
java.nio.file.AccessDeniedException: /var/lib/tomcat9/newsexportdata
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:90) ~[?:?]
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111) ~[?:?]
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:116) ~[?:?]
	at sun.nio.fs.UnixFileSystemProvider.createDirectory(UnixFileSystemProvider.java:389) ~[?:?]
	at java.nio.file.Files.createDirectory(Files.java:690) ~[?:?]
	at java.nio.file.Files.createAndCheckIsDirectory(Files.java:797) ~[?:?]
	at java.nio.file.Files.createDirectories(Files.java:783) ~[?:?]
	at org.apache.lucene.store.FSDirectory.<init>(FSDirectory.java:156) ~[lucene-core-8.7.0.jar:8.7.0 2dc63e901c60cda27ef3b744bc554f1481b3b067 - atrisharma - 2020-10-29 19:35:28]
	at org.apache.lucene.store.MMapDirectory.<init>(MMapDirectory.java:159) ~[lucene-core-8.7.0.jar:8.7.0 2dc63e901c60cda27ef3b744bc554f1481b3b067 - atrisharma - 2020-10-29 19:35:28]
	at org.apache.lucene.store.MMapDirectory.<init>(MMapDirectory.java:112) ~[lucene-core-8.7.0.jar:8.7.0 2dc63e901c60cda27ef3b744bc554f1481b3b067 - atrisharma - 2020-10-29 19:35:28]
	at org.apache.lucene.store.FSDirectory.open(FSDirectory.java:196) ~[lucene-core-8.7.0.jar:8.7.0 2dc63e901c60cda27ef3b744bc554f1481b3b067 - atrisharma - 2020-10-29 19:35:28]
	at org.apache.lucene.store.FSDirectory.open(FSDirectory.java:189) ~[lucene-core-8.7.0.jar:8.7.0 2dc63e901c60cda27ef3b744bc554f1481b3b067 - atrisharma - 2020-10-29 19:35:28]
	at ir.irib.news.mining.business.repo.NewsExportRepo.begin(NewsExportRepo.java:39) ~[classes/:?]
	at ir.irib.news.mining.business.repo.NewsExportRepo.addKeys(NewsExportRepo.java:64) ~[classes/:?]
	at ir.irib.news.mining.business.service.scrape.ServiceNewsExport.initRepo(ServiceNewsExport.java:166) [classes/:?]
	at ir.irib.news.mining.business.service.scrape.ServiceNewsExport.start(ServiceNewsExport.java:39) [classes/:?]
	at com.vantar.service.Services.startService(Services.java:198) [classes/:?]
	at com.vantar.service.Services.startServices(Services.java:145) [classes/:?]
	at com.vantar.service.Services.start(Services.java:69) [classes/:?]
	at ir.irib.news.mining.common.Application.contextInitialized(Application.java:134) [classes/:?]
	at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4685) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5146) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:717) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:690) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:705) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:978) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1849) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?]
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) [tomcat9-util-9.0.31.jar:9.0.31]
	at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:118) [?:?]
	at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:773) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:427) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1576) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:309) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:936) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:841) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1384) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1374) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?]
	at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) [tomcat9-util-9.0.31.jar:9.0.31]
	at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:140) [?:?]
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:909) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:262) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.core.StandardService.startInternal(StandardService.java:421) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.startup.Catalina.start(Catalina.java:633) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]
	at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:343) [bootstrap.jar:9.0.31]
	at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:478) [bootstrap.jar:9.0.31]
ERROR 13:24:14 ServiceNewsExport.java:40 ! can not start news export service. repo not writable
INFO  13:24:14 Services.java:203 ServiceNewsExport started
INFO  13:24:14 Services.java:203 ServiceAuth started
INFO  13:24:15 Services.java:203 ServiceDataShaper started
INFO  13:24:15 ServiceAuth.java:105 Auth tokens are loaded.
INFO  13:24:15 Application.java:138 < Initializing application



ERROR 13:24:26 NewsRssLinkCapture.java:253 ! ! ! RssRead(3, ایرنا, http://www.irna.ir/fa/rss.aspx?kind=-1&area=0) > response-code:404
ERROR 13:24:26 LogEvent.java:113 >>> NewsRssLinkCapture
RssRead
3
ایرنا
http://www.irna.ir/fa/rss.aspx?kind=-1&area=0
response-code:404

ERROR 13:24:42 NewsRssLinkCapture.java:248 ! ! ! RssRead(27, خبرگزاری آریا, http://www.aryanews.com/Feed.aspx?l=fa-ir)
ir.irib.news.mining.business.service.scrape.exception.ScrapeException: ! ! ! http://www.aryanews.com/Feed.aspx?l=fa-ir ! ! ! http://www.aryanews.com/Feed.aspx?l=fa-ir response failed (PKIX path validation failed: java.security.cert.CertPathValidatorException: validity check failed)
	at ir.irib.news.mining.business.service.scrape.news.HtmlParser.openXml(HtmlParser.java:189) ~[classes/:?]
	at ir.irib.news.mining.business.service.scrape.news.NewsRssLinkCapture.getNews(NewsRssLinkCapture.java:53) ~[classes/:?]
	at ir.irib.news.mining.business.service.scrape.ServiceScrapeScheduler.lambda$schedule$0(ServiceScrapeScheduler.java:117) ~[classes/:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]
	at java.lang.Thread.run(Thread.java:829) [?:?]
ERROR 13:24:42 LogEvent.java:113 >>> NewsRssLinkCapture
RssRead
27
خبرگزاری آریا
http://www.aryanews.com/Feed.aspx?l=fa-ir

ir.irib.news.mining.business.service.scrape.exception.ScrapeException: ! ! ! http://www.aryanews.com/Feed.aspx?l=fa-ir ! ! ! http://www.aryanews.com/Feed.aspx?l=fa-ir response failed (PKIX path validation failed: java.security.cert.CertPathValidatorException: validity check failed)
	at ir.irib.news.mining.business.service.scrape.news.HtmlParser.openXml(HtmlParser.java:189) ~[classes/:?]
	at ir.irib.news.mining.business.service.scrape.news.NewsRssLinkCapture.getNews(NewsRssLinkCapture.java:53) ~[classes/:?]
	at ir.irib.news.mining.business.service.scrape.ServiceScrapeScheduler.lambda$schedule$0(ServiceScrapeScheduler.java:117) ~[classes/:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]
	at java.lang.Thread.run(Thread.java:829) [?:?]
ERROR 13:25:05 NewsRssLinkCapture.java:248 ! ! ! RssRead(22, اقتصاد گردان, http://eghtesadgardan.ir/fa/rss/allnews)
ir.irib.news.mining.business.service.scrape.exception.ScrapeException: ! ! ! http://eghtesadgardan.ir/fa/rss/allnews ! ! ! http://eghtesadgardan.ir/fa/rss/allnews response failed (Connect to eghtesadgardan.ir:80 [eghtesadgardan.ir/94.182.147.60] failed: connect timed out)
	at ir.irib.news.mining.business.service.scrape.news.HtmlParser.openXml(HtmlParser.java:189) ~[classes/:?]
	at ir.irib.news.mining.business.service.scrape.news.NewsRssLinkCapture.getNews(NewsRssLinkCapture.java:53) ~[classes/:?]
	at ir.irib.news.mining.business.service.scrape.ServiceScrapeScheduler.lambda$schedule$0(ServiceScrapeScheduler.java:117) ~[classes/:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]
	at java.lang.Thread.run(Thread.java:829) [?:?]
ERROR 13:25:05 LogEvent.java:113 >>> NewsRssLinkCapture
RssRead
22
اقتصاد گردان
http://eghtesadgardan.ir/fa/rss/allnews

ir.irib.news.mining.business.service.scrape.exception.ScrapeException: ! ! ! http://eghtesadgardan.ir/fa/rss/allnews ! ! ! http://eghtesadgardan.ir/fa/rss/allnews response failed (Connect to eghtesadgardan.ir:80 [eghtesadgardan.ir/94.182.147.60] failed: connect timed out)
	at ir.irib.news.mining.business.service.scrape.news.HtmlParser.openXml(HtmlParser.java:189) ~[classes/:?]
	at ir.irib.news.mining.business.service.scrape.news.NewsRssLinkCapture.getNews(NewsRssLinkCapture.java:53) ~[classes/:?]
	at ir.irib.news.mining.business.service.scrape.ServiceScrapeScheduler.lambda$schedule$0(ServiceScrapeScheduler.java:117) ~[classes/:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]
	at java.lang.Thread.run(Thread.java:829) [?:?]
ERROR 13:25:12 NewsRssLinkCapture.java:248 ! ! ! RssRead(30, عصرخبر, http://www.asrkhabar.com/fa/rss/allnews)
ir.irib.news.mining.business.service.scrape.exception.ScrapeException: ! ! ! http://www.asrkhabar.com/fa/rss/allnews ! ! ! http://www.asrkhabar.com/fa/rss/allnews response failed (Connect to www.asrkhabar.com:80 [www.asrkhabar.com/94.182.147.53] failed: connect timed out)
	at ir.irib.news.mining.business.service.scrape.news.HtmlParser.openXml(HtmlParser.java:189) ~[classes/:?]
	at ir.irib.news.mining.business.service.scrape.news.NewsRssLinkCapture.getNews(NewsRssLinkCapture.java:53) ~[classes/:?]
	at ir.irib.news.mining.business.service.scrape.ServiceScrapeScheduler.lambda$schedule$0(ServiceScrapeScheduler.java:117) ~[classes/:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]
	at java.lang.Thread.run(Thread.java:829) [?:?]
ERROR 13:25:12 LogEvent.java:113 >>> NewsRssLinkCapture
RssRead
30
عصرخبر
http://www.asrkhabar.com/fa/rss/allnews

ir.irib.news.mining.business.service.scrape.exception.ScrapeException: ! ! ! http://www.asrkhabar.com/fa/rss/allnews ! ! ! http://www.asrkhabar.com/fa/rss/allnews response failed (Connect to www.asrkhabar.com:80 [www.asrkhabar.com/94.182.147.53] failed: connect timed out)
	at ir.irib.news.mining.business.service.scrape.news.HtmlParser.openXml(HtmlParser.java:189) ~[classes/:?]
	at ir.irib.news.mining.business.service.scrape.news.NewsRssLinkCapture.getNews(NewsRssLinkCapture.java:53) ~[classes/:?]
	at ir.irib.news.mining.business.service.scrape.ServiceScrapeScheduler.lambda$schedule$0(ServiceScrapeScheduler.java:117) ~[classes/:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]
	at java.lang.Thread.run(Thread.java:829) [?:?]
ERROR 13:25:29 LogEvent.java:113 >>> QueueExceptionHandlerBase
handleConsumerException
amq.ctag-IJBo9SjUf4FKeOIYdaC2lg
handleDelivery
AMQChannel(amqp://khargoosh@127.0.0.1:5672/,1)

java.lang.NullPointerException: null
	at com.vantar.service.Services.setServiceStarted(Services.java:237) ~[classes/:?]
	at com.vantar.service.messaging.ServiceMessaging$1.getItem(ServiceMessaging.java:99) ~[classes/:?]
	at com.vantar.queue.Queue$2.handleDelivery(Queue.java:439) ~[classes/:?]
	at com.rabbitmq.client.impl.ConsumerDispatcher$5.run(ConsumerDispatcher.java:149) [amqp-client-5.9.0.jar:5.9.0]
	at com.rabbitmq.client.impl.ConsumerWorkService$WorkPoolRunnable.run(ConsumerWorkService.java:104) [amqp-client-5.9.0.jar:5.9.0]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]
	at java.lang.Thread.run(Thread.java:829) [?:?]
ERROR 13:26:21 LogEvent.java:113 >>> ServiceIndexing

com.vantar.exception.DatabaseException: java.net.ConnectException: Connection refused
	at com.vantar.database.nosql.elasticsearch.ElasticWrite.commit(ElasticWrite.java:174) ~[classes/:?]
	at ir.irib.news.mining.business.service.indexing.ServiceIndexing.indexingTask(ServiceIndexing.java:127) ~[classes/:?]
	at ir.irib.news.mining.business.service.indexing.ServiceIndexing.scheduledTask(ServiceIndexing.java:58) ~[classes/:?]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?]
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305) [?:?]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) [?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]
	at java.lang.Thread.run(Thread.java:829) [?:?]
Caused by: java.net.ConnectException: Connection refused
	at org.elasticsearch.client.RestClient.extractAndWrapCause(RestClient.java:879) ~[elasticsearch-rest-client-7.10.1.jar:7.10.1]
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:283) ~[elasticsearch-rest-client-7.10.1.jar:7.10.1]
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:270) ~[elasticsearch-rest-client-7.10.1.jar:7.10.1]
	at org.elasticsearch.client.RestHighLevelClient.internalPerformRequest(RestHighLevelClient.java:1632) ~[elasticsearch-rest-high-level-client-7.10.1.jar:7.10.1]
	at org.elasticsearch.client.RestHighLevelClient.performRequest(RestHighLevelClient.java:1602) ~[elasticsearch-rest-high-level-client-7.10.1.jar:7.10.1]
	at org.elasticsearch.client.RestHighLevelClient.performRequestAndParseEntity(RestHighLevelClient.java:1572) ~[elasticsearch-rest-high-level-client-7.10.1.jar:7.10.1]
	at org.elasticsearch.client.RestHighLevelClient.bulk(RestHighLevelClient.java:537) ~[elasticsearch-rest-high-level-client-7.10.1.jar:7.10.1]
	at com.vantar.database.nosql.elasticsearch.ElasticWrite.commit(ElasticWrite.java:161) ~[classes/:?]
	... 8 more
Caused by: java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method) ~[?:?]
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:777) ~[?:?]
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174) ~[httpcore-nio-4.4.12.jar:4.4.12]
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148) ~[httpcore-nio-4.4.12.jar:4.4.12]
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351) ~[httpcore-nio-4.4.12.jar:4.4.12]
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:221) ~[httpasyncclient-4.1.4.jar:4.1.4]
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64) ~[httpasyncclient-4.1.4.jar:4.1.4]
	... 1 more
ERROR 13:27:10 AdminData.java:153 ! {}
com.vantar.exception.DatabaseException: java.net.ConnectException: Connection refused
	at com.vantar.database.nosql.elasticsearch.ElasticSearch.count(ElasticSearch.java:59) ~[classes/:?]
	at com.vantar.database.nosql.elasticsearch.ElasticSearch.getPage(ElasticSearch.java:209) ~[classes/:?]
	at com.vantar.admin.model.AdminData.list(AdminData.java:144) [classes/:?]
	at com.vantar.admin.web.AdminDataController.dataList(AdminDataController.java:32) [classes/:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]
	at com.vantar.web.RouteToMethod.service(RouteToMethod.java:59) [classes/:?]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) [tomcat9-servlet-api-9.0.31.jar:?]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat9-websocket-9.0.31.jar:9.0.31]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:688) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367) [tomcat9-coyote-9.0.31.jar:9.0.31]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat9-coyote-9.0.31.jar:9.0.31]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868) [tomcat9-coyote-9.0.31.jar:9.0.31]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1639) [tomcat9-coyote-9.0.31.jar:9.0.31]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat9-coyote-9.0.31.jar:9.0.31]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat9-util-9.0.31.jar:9.0.31]
	at java.lang.Thread.run(Thread.java:829) [?:?]
Caused by: java.net.ConnectException: Connection refused
	at org.elasticsearch.client.RestClient.extractAndWrapCause(RestClient.java:879) ~[elasticsearch-rest-client-7.10.1.jar:7.10.1]
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:283) ~[elasticsearch-rest-client-7.10.1.jar:7.10.1]
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:270) ~[elasticsearch-rest-client-7.10.1.jar:7.10.1]
	at org.elasticsearch.client.RestHighLevelClient.internalPerformRequest(RestHighLevelClient.java:1632) ~[elasticsearch-rest-high-level-client-7.10.1.jar:7.10.1]
	at org.elasticsearch.client.RestHighLevelClient.performRequest(RestHighLevelClient.java:1602) ~[elasticsearch-rest-high-level-client-7.10.1.jar:7.10.1]
	at org.elasticsearch.client.RestHighLevelClient.performRequestAndParseEntity(RestHighLevelClient.java:1572) ~[elasticsearch-rest-high-level-client-7.10.1.jar:7.10.1]
	at org.elasticsearch.client.RestHighLevelClient.count(RestHighLevelClient.java:1014) ~[elasticsearch-rest-high-level-client-7.10.1.jar:7.10.1]
	at com.vantar.database.nosql.elasticsearch.ElasticSearch.count(ElasticSearch.java:56) ~[classes/:?]
	... 31 more
Caused by: java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method) ~[?:?]
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:777) ~[?:?]
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174) ~[httpcore-nio-4.4.12.jar:4.4.12]
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148) ~[httpcore-nio-4.4.12.jar:4.4.12]
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351) ~[httpcore-nio-4.4.12.jar:4.4.12]
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:221) ~[httpasyncclient-4.1.4.jar:4.1.4]
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64) ~[httpasyncclient-4.1.4.jar:4.1.4]
	... 1 more
ERROR 13:27:16 AdminData.java:153 ! {}
com.vantar.exception.DatabaseException: java.net.ConnectException: Connection refused
	at com.vantar.database.nosql.elasticsearch.ElasticSearch.count(ElasticSearch.java:59) ~[classes/:?]
	at com.vantar.database.nosql.elasticsearch.ElasticSearch.getPage(ElasticSearch.java:209) ~[classes/:?]
	at com.vantar.admin.model.AdminData.list(AdminData.java:144) [classes/:?]
	at com.vantar.admin.web.AdminDataController.dataList(AdminDataController.java:32) [classes/:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]
	at com.vantar.web.RouteToMethod.service(RouteToMethod.java:59) [classes/:?]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) [tomcat9-servlet-api-9.0.31.jar:?]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat9-websocket-9.0.31.jar:9.0.31]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:688) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) [tomcat9-catalina-9.0.31.jar:9.0.31]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:367) [tomcat9-coyote-9.0.31.jar:9.0.31]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat9-coyote-9.0.31.jar:9.0.31]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868) [tomcat9-coyote-9.0.31.jar:9.0.31]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1639) [tomcat9-coyote-9.0.31.jar:9.0.31]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat9-coyote-9.0.31.jar:9.0.31]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat9-util-9.0.31.jar:9.0.31]
	at java.lang.Thread.run(Thread.java:829) [?:?]
Caused by: java.net.ConnectException: Connection refused
	at org.elasticsearch.client.RestClient.extractAndWrapCause(RestClient.java:879) ~[elasticsearch-rest-client-7.10.1.jar:7.10.1]
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:283) ~[elasticsearch-rest-client-7.10.1.jar:7.10.1]
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:270) ~[elasticsearch-rest-client-7.10.1.jar:7.10.1]
	at org.elasticsearch.client.RestHighLevelClient.internalPerformRequest(RestHighLevelClient.java:1632) ~[elasticsearch-rest-high-level-client-7.10.1.jar:7.10.1]
	at org.elasticsearch.client.RestHighLevelClient.performRequest(RestHighLevelClient.java:1602) ~[elasticsearch-rest-high-level-client-7.10.1.jar:7.10.1]
	at org.elasticsearch.client.RestHighLevelClient.performRequestAndParseEntity(RestHighLevelClient.java:1572) ~[elasticsearch-rest-high-level-client-7.10.1.jar:7.10.1]
	at org.elasticsearch.client.RestHighLevelClient.count(RestHighLevelClient.java:1014) ~[elasticsearch-rest-high-level-client-7.10.1.jar:7.10.1]
	at com.vantar.database.nosql.elasticsearch.ElasticSearch.count(ElasticSearch.java:56) ~[classes/:?]
	... 31 more
Caused by: java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method) ~[?:?]
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:777) ~[?:?]
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174) ~[httpcore-nio-4.4.12.jar:4.4.12]
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148) ~[httpcore-nio-4.4.12.jar:4.4.12]
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351) ~[httpcore-nio-4.4.12.jar:4.4.12]
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:221) ~[httpasyncclient-4.1.4.jar:4.1.4]
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64) ~[httpasyncclient-4.1.4.jar:4.1.4]
	... 1 more
ERROR 13:27:22 LogEvent.java:113 >>> ServiceIndexing

com.vantar.exception.DatabaseException: java.net.ConnectException: Connection refused
	at com.vantar.database.nosql.elasticsearch.ElasticWrite.commit(ElasticWrite.java:174) ~[classes/:?]
	at ir.irib.news.mining.business.service.indexing.ServiceIndexing.indexingTask(ServiceIndexing.java:127) ~[classes/:?]
	at ir.irib.news.mining.business.service.indexing.ServiceIndexing.scheduledTask(ServiceIndexing.java:58) ~[classes/:?]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?]
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305) [?:?]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) [?:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]
	at java.lang.Thread.run(Thread.java:829) [?:?]
Caused by: java.net.ConnectException: Connection refused
	at org.elasticsearch.client.RestClient.extractAndWrapCause(RestClient.java:879) ~[elasticsearch-rest-client-7.10.1.jar:7.10.1]
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:283) ~[elasticsearch-rest-client-7.10.1.jar:7.10.1]
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:270) ~[elasticsearch-rest-client-7.10.1.jar:7.10.1]
	at org.elasticsearch.client.RestHighLevelClient.internalPerformRequest(RestHighLevelClient.java:1632) ~[elasticsearch-rest-high-level-client-7.10.1.jar:7.10.1]
	at org.elasticsearch.client.RestHighLevelClient.performRequest(RestHighLevelClient.java:1602) ~[elasticsearch-rest-high-level-client-7.10.1.jar:7.10.1]
	at org.elasticsearch.client.RestHighLevelClient.performRequestAndParseEntity(RestHighLevelClient.java:1572) ~[elasticsearch-rest-high-level-client-7.10.1.jar:7.10.1]
	at org.elasticsearch.client.RestHighLevelClient.bulk(RestHighLevelClient.java:537) ~[elasticsearch-rest-high-level-client-7.10.1.jar:7.10.1]
	at com.vantar.database.nosql.elasticsearch.ElasticWrite.commit(ElasticWrite.java:161) ~[classes/:?]
	... 8 more
Caused by: java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method) ~[?:?]
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:777) ~[?:?]
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174) ~[httpcore-nio-4.4.12.jar:4.4.12]
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148) ~[httpcore-nio-4.4.12.jar:4.4.12]
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351) ~[httpcore-nio-4.4.12.jar:4.4.12]
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:221) ~[httpasyncclient-4.1.4.jar:4.1.4]
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64) ~[httpasyncclient-4.1.4.jar:4.1.4]
	... 1 more


